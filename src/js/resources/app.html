<html>
<head>
<title>Message Router Example</title>
<script language="JavaScript">

// Send a query to the browser process.
function sendMessage() {
  // Results in a call to the OnQuery method in client_impl.cc.
  window.cefQuery({
    request: 'FromJs: ' + JSON.stringify(document.getElementById("message").value),
    onSuccess: function(response) {
      document.getElementById('res1').value = 'Response From Cpp: '+response;
    },
    onFailure: function(error_code, error_message) { console.log(error_code, error_message) }
  });
}

function onReceiveIpcMessage(request) {
  document.getElementById('res2').value = 'Request From Cpp: '+request;
}
</script>

</head>
<body bgcolor="white">
<form>
Message: <input type="text" id="message" value="My Message">
<br/><input type="button" onclick="sendMessage();" value="Send Message">
<br/>You should see the reverse of your message below:
<br/><textarea rows="5" cols="40" id="res1"></textarea>
<br/><textarea rows="5" cols="40" id="res2"></textarea>
</form>
</body>
</html>
